import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;

public class CalculatorController {
    @FXML
    private TextField display;

    private Calculator calculator = new Calculator();
    private StringBuilder input = new StringBuilder();

    @FXML
    public void handleNumber(javafx.event.ActionEvent event) {
        Button button = (Button) event.getSource();
        input.append(button.getText());
        display.setText(input.toString());
    }

    @FXML
    public void handleOperator(javafx.event.ActionEvent event) {
        if (input.length() > 0) {
            calculator.setOperand1(Double.parseDouble(input.toString()));
            Button button = (Button) event.getSource();
            calculator.setOperator(button.getText().charAt(0));
            input.setLength(0); // Clear input for the second operand
        }
    }

    @FXML
    public void handleEquals() {
        if (input.length() > 0) {
            calculator.setOperand2(Double.parseDouble(input.toString()));
            calculator.calculate();
            if (calculator.isError()) {
                display.setText("Error: Division by Zero");
            } else {
                display.setText(String.valueOf(calculator.getResult()));
            }
        }
    }

    @FXML
    public void handleClear() {
        calculator.reset();
        input.setLength(0);
        display.setText("");
    }
}
